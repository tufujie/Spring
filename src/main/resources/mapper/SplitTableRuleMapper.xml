<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jef.dao.ISplitTableRuleDao" >

    <!-- 使用二级缓存 -->
    <cache type="com.jef.redis.cache.RedisCache" />


    <select id="getSplitTableRuleVoList" resultType="com.jef.entity.SplitTableRuleVo" parameterType="map">
        select FID id,FECName sufEcName,FTableName tableName,FIsECID isEcID,FECID ecID,FActualTable actualTable
        from t_bdc_splittablerule
        <where>
            <if test="isECID != null and isECID != ''">
                and FIsECID = #{isECID}
            </if>
            <if test="ecID != null and ecID != ''">
                and FECID = #{ecID}
            </if>
            <if test="logicTable != null and logicTable != ''">
                and FTableName = #{logicTable}
            </if>
        </where>
    </select>

    <select id="getSplitTableRuleVo" resultType="com.jef.entity.SplitTableRuleVo">
		select FID id,FECName sufEcName,FTableName tableName,FIsECID isEcID,FECID ecID,FActualTable actualTable
		from t_bdc_splittablerule where FIsECID = 1
	</select>

    <select id="getTableByECID" resultType="com.jef.entity.SplitTableRuleVo">
        select FID id,FECName sufEcName,FTableName tableName,FIsECID isEcID,FECID ecID,FActualTable actualTable
        from t_bdc_splittablerule
        where FECID = #{ecID} and FIsECID = 1 and FTableName in
        <foreach collection="tableNameList" item="item" open="(" separator="," close=")"  >
            #{item}
        </foreach>
    </select>

</mapper>